#!/usr/bin/env python3

import tarfile
import pwn
import os


def xtract(file, ext):
    tar = tarfile.open(file, ext)
    tar.extractall()
    tar.close()
    os.remove(file)


i = True

pwn.log.progress("Extraction time !")
while i == True:
    dir = os.listdir(".")

    for file in dir:
        if file.endswith("tar.gz"):
            xtract(file, "r:gz")

        elif file.endswith("tar"):
            xtract(file, "r:tar")

        elif file.endswith("tar.xz"):
            xtract(file, "r:xz")

        elif file.endswith("tar.bz2"):
            xtract(file, "r:bz2")

        elif file.endswith("py"):
            continue

        else:
            pwn.warn("Plus de fichiers à décompresser")
            i = False

flag = open("flag.txt", "r").readline()
pwn.success("Flag is : {}".format(flag))
